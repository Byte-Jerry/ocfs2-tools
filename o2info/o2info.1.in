.TH "o2info" "1" "October 2010" "Version @VERSION@" "OCFS2 Manual Pages"
.SH "NAME"
o2info \- Dump \fIOCFS2\fR file system information on disk.
.SH "SYNOPSIS"
\fBo2info\fR [\fB\-C|\-\-cluster\-coherent\fR] [\fB\-\-fs\-features\fR] [\fB\-\-volinfo\fR] [\fB\-\-mkfs\fR] [\fB\-\-freeinode\fR] [\fB\-\-freefrag\fR \fIchunksize\fR] <\fBdevice or file\fR>

.SH "DESCRIPTION"
.PP
\fBo2info\fR is designed to be an information tool, to display \fIOCFS2\fR file system information on disk. Its main goal on one hand, is to provide a tool to display fs info in a comprehensive way and providing the information which may be missing in \fBdebugfs.ocfs\fR and \fBtunefs.ocfs2\fR such as global bitmap free space fragmentation and free inode info for each slot, on the other hand, it also aims to become a info tool(\fBnot\fR an administration one), which therefore allows all users who may have no read privilege on the underlying device to use the utility. In practice, \fB'o2info /path/to/file/on/ocfs2/vol'\fR use a new \fBOCFS2_IOC_INFO\fR ioctl to get info from fs for a mounted case. For a privileged user(e.g, root), the same info however, can also be accessed by \fB'o2info /dev/sdxN'\fR to direcly manipulate the raw device.

.SH "OPTIONS"
.TP
\fB\-C, \-\-cluster\-coherent\fR
Enable cluster (in)coherency for mounted case, means it will attempt to acquire a global PR lock when querying info from a cluster filesystem, which may degrade the performance, default is none cluster-coherency.

.TP
\fB\-\-fs\-features\fR
List all compat, incompat and ro-compat fs features on \fIOCFS2\fR filesystem.

.TP
\fB\-\-volinfo\fR
Dump basic volume information, such as blocksize, clustersize, volume label and UUID etc.

.TP
\fB\-\-mkfs\fR
Dump an original format of mkfs.ocfs's arguments, importantly, which can be used directly as a fresh mkfs retry:
#mkfs.ocfs2 "$(o2info --mkfs /dev/name/or/path/of/file)" /dev/sdaX

.TP
\fB\-\-freeinode\fR
Display free inode space for all nodes in \fIOCFS2\fR cluster.

.TP
\fB\-\-freefrag\fR \fIchunksize\fR
Report free space fragmentation on \fIOCFS2\fR filesystems, it prints how many chunks of chunksize are available as contiguous and aligned free space by scanning the global allocation bitmap. In the meantime, the percentage of contiguous free clusters of size and of alignment chunksize is reported, what's more, it also displays the minimum/maximum/average free chunk size in filesystem, along with a histogram of all free chunks. \fBNOTE\fR, chunksize specified must be a power of two and be equal to or larger than filesystem's clustersize.

.TP
\fB\-V, \-\-version\fR
Show version and exit.

.TP
\fB\-h, \-\-help\fR
Display help and exit.

.SH "EXAMPLES"
[oracle@node1 ~]# o2info --volinfo /storage/testfile      # For none-privileged users.
.br
[root@node1 ~]# o2info --volinfo /dev/sda1
.br
       Label: ocfs2-volume
.br
        UUID: 976D8E630B3A4F1F95497311A92901FC
.br
  Block Size: 4096
.br
Cluster Size: 4096
.br
  Node Slots: 4
.br
    Features: backup-super strict-journal-super sparse inline-data xattr
.br
    Features: unwritten

[oracle@node1 ~]# o2info --freefrag 64 /storage/testfile      # For none-privileged users.
.br
[root@node1 ~]# o2info --freefrag 64 /dev/sda1
.br
Blocksize: 4096 bytes
.br
Clustersize: 32768 bytes
.br
Total clusters: 915704
.br
Free clusters: 891687 (97.4%)
.br

Min. free extent: 32 KB
.br
Max. free extent: 1032160 KB
.br
Avg. free extent: 663552 KB
.br

Chunksize: 131072 bytes (4 clusters)
.br
Total chunks: 228927
.br
Free chunks: 222888 (97.4%)
.br

HISTOGRAM OF FREE EXTENT SIZES:
.br
Extent Size Range :  Free extents  Free Clusters  Percent
.br
   32K...   64K-  :             1             1    0.00%
.br
    1M...    2M-  :             9           288    0.03%
.br
    8M...   16M-  :             2           831    0.09%
.br
   32M...   64M-  :             1          2047    0.23%
.br
  128M...  256M-  :             1          8191    0.92%
.br
  256M...  512M-  :             2         21706    2.43%
.br
  512M... 1024M-  :            27        858623   96.29%
.br


.SH "SEE ALSO"
.BR debugfs.ocfs2(8)
.BR tunefs.ocfs2(8)

.SH "AUTHORS"
Oracle Corporation

.SH "COPYRIGHT"
Copyright \(co 2010 Oracle. All rights reserved.
